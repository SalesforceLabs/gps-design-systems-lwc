<template>
  <div class={errorClass}>
    <fieldset if:true={isCheckbox} class="slds-form-element">
      <legend class="slds-show">
        <abbr if:true={required} class="slds-required" title={requiredLabel}>
          *
        </abbr>
        <span
          class="slds-form-element__legend slds-form-element__label slds-show_inline slds-float_none slds-var-p-top_xxx-small"
        >
          {label}
        </span>
        <span style="white-space: nowrap">
          <omnistudio-tooltip
            if:true={fieldLevelHelp}
            theme="slds"
            content={fieldLevelHelp}
            icon-name="utility:info"
            extrabuttonclass="slds-m-bottom_xxx-small"
            arrowposition={fieldLevelHelpPosition}
          >
          </omnistudio-tooltip>
          <slot name="label"> </slot>
        </span>
      </legend>

      <div>
        <template for:each={internalOpts} for:item="e" for:index="index">
          <span key={e.id} class="slds-checkbox">
            <input
              type="checkbox"
              required={required}
              disabled={disabled}
              id={e.id}
              data-index={index}
              tabindex={tabIndex}
              name={name}
              checked={e.selected}
              value={e.value}
              onfocus={handleFocus}
              onchange={onchangevalue}
            />
            <label class="slds-checkbox__label" data-index={index} for={e.id}>
              <span class="slds-checkbox_faux"> </span>
              <span class="slds-form-element__label slds-p-top_none">
                {e.label}
              </span>
            </label>
          </span>
        </template>
      </div>
    </fieldset>

    <fieldset if:true={isButton} class="slds-form-element">
      <legend class="slds-p-top_none slds-show">
        <abbr if:true={required} class="slds-required" title={requiredLabel}>
          *
        </abbr>
        <span
          class="slds-form-element__legend slds-form-element__label slds-show_inline slds-float_none slds-var-p-top_xxx-small"
        >
          {label}
        </span>
        <omnistudio-tooltip
          if:true={fieldLevelHelp}
          theme="slds"
          content={fieldLevelHelp}
          icon-name="utility:info"
          extrabuttonclass="slds-m-left_x-small slds-p-right_x-small"
          arrowposition={fieldLevelHelpPosition}
        >
        </omnistudio-tooltip>
      </legend>
      <div class="slds-form-element__control">
        <div class="slds-checkbox_button-group">
          <template for:each={internalOpts} for:item="e" for:index="index">
            <span key={e.id} class="slds-button slds-checkbox_button">
              <input
                type="checkbox"
                required={required}
                disabled={disabled}
                id={e.id}
                data-index={index}
                name={name}
                tabindex={tabIndex}
                checked={e.selected}
                value={e.value}
                onfocus={handleFocus}
                onchange={onchangevalue}
              />
              <label
                class="slds-checkbox_button__label"
                data-index={index}
                for={e.id}
              >
                <span class="slds-checkbox_faux"> {e.label} </span>
                <div class="slds-checkbox-overlay">{e.label}</div>
              </label>
            </span>
          </template>
        </div>
      </div>
    </fieldset>

    <fieldset if:true={isIcon} class="slds-form-element">
      <legend
        class="slds-form-element__legend slds-form-element__label slds-show"
      >
        <abbr if:true={required} class="slds-required" title={requiredLabel}>
          *
        </abbr>
        <span> {label} </span>
        <omnistudio-tooltip
          if:true={fieldLevelHelp}
          theme="slds"
          content={fieldLevelHelp}
          icon-name="utility:info"
          arrowposition={fieldLevelHelpPosition}
        >
        </omnistudio-tooltip>
      </legend>
      <div
        class="slds-checkbox_button-group slds-button slds-button_icon slds-button_icon-border"
      >
        <span
          class="slds-button slds-checkbox_button vloc-checkbox-button_span"
        >
          <input
            id={checkboxId}
            name={name}
            disabled={disabled}
            type="checkbox"
            tabindex={tabIndex}
            checked={isChecked}
            value={value}
            onfocus={handleFocus}
            onchange={onchangevalue}
          />
          <label
            class="slds-checkbox_button__label vloc-checkbox-button_label"
            for={checkboxId}
          >
            <omnistudio-icon
              if:false={isChecked}
              variant="inverse"
              theme={theme}
              baseurl={iconUrl}
              icon-name={checkedIconName}
              iconposition=""
              parenttype="button"
              alternative-text=""
              size=""
            >
            </omnistudio-icon>
            <omnistudio-icon
              if:true={isChecked}
              variant="inverse"
              theme={theme}
              baseurl={iconUrl}
              icon-name={uncheckedIconName}
              iconposition=""
              parenttype="button"
              alternative-text=""
              size=""
            >
            </omnistudio-icon>
          </label>
        </span>
      </div>
    </fieldset>

    <div if:true={isError} class="slds-form-element__help">{errorMessage}</div>
  </div>
</template>
